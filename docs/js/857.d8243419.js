(self["webpackChunkblobs"]=self["webpackChunkblobs"]||[]).push([[857],{2857:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ue});var o=r(3673);const i=(0,o.HX)("data-v-dc6878aa"),a=i(((e,t,r,a,n,l)=>{const s=(0,o.up)("buddies-component"),c=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(c,{class:"row items-center justify-evenly ummmm"},{default:i((()=>[(0,o.Wm)(s)])),_:1})})),n=(0,o.HX)("data-v-6f65ad50");(0,o.dD)("data-v-6f65ad50");const l={class:"game-canvas-container row"},s={class:"col column"};(0,o.Cn)();const c=n(((e,t,r,i,a,n)=>{const c=(0,o.up)("buddies-controls");return(0,o.wg)(),(0,o.j4)("div",l,[(0,o.Wm)("div",{id:"p5-container",ref:"p5Container",class:"col buddies-plate",onSelectstart:t[1]||(t[1]=t=>e.doNothing(t)),onContextmenu:t[2]||(t[2]=t=>e.doNothing(t))},null,544),(0,o.Wm)("div",s,[(0,o.Wm)(c)])])}));var u=r(5777),d=r(2297),h=r(930),p=r.n(h),b=r(5181),m=r(5718),f=r(556),g=function(e,t,r,o){var i,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(n=(a<3?i(n):a>3?i(t,r,n):i(t,r))||n);return a>3&&n&&Object.defineProperty(t,r,n),n};const y="sketchstore";f.storeInstance.hasModule(y)&&f.storeInstance.unregisterModule(y);let v=class extends m.g4{constructor(){super(...arguments),Object.defineProperty(this,"mainSketch",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"mainGraphic",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"overlayGraphic",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"debugGraphic",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"debugOn",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"frameRate",{enumerable:!0,configurable:!0,writable:!0,value:144})}initP(e){this.mainSketch=e}initGraphics(e){this.mainGraphic=e}initOverlay(e){this.overlayGraphic=e}initDebugOverlay(e){this.debugGraphic=e}setDebug(e){this.debugOn=e}setFrameRate(e){var t;this.frameRate=e,null===(t=this.mainSketch)||void 0===t||t.frameRate(e)}get isDebug(){return this.debugOn}toggleDebug(){this.setDebug(!this.debugOn)}};g([m.mm],v.prototype,"initP",null),g([m.mm],v.prototype,"initGraphics",null),g([m.mm],v.prototype,"initOverlay",null),g([m.mm],v.prototype,"initDebugOverlay",null),g([m.mm],v.prototype,"setDebug",null),g([m.mm],v.prototype,"setFrameRate",null),g([b.aU],v.prototype,"toggleDebug",null),v=g([(0,m.Yl)({name:y,store:f.storeInstance,dynamic:!0,namespaced:!0})],v);const w=(0,m.rT)(v);f.storeInstance.watch((()=>(0,m.rT)(v,f.storeInstance).isDebug),((e,t)=>{console.log("debug changed",t,e)}));class O{getGoals(e,t,r){const o=t.position;if(!o)return[];const i=[];return o.x<25&&i.push(e.createVector(t.maxSpeed,t.velocity.y)),o.x>e.width-25&&i.push(e.createVector(-t.maxSpeed,t.velocity.y)),o.y<25&&i.push(e.createVector(t.velocity.x,t.maxSpeed)),o.y>e.height-25&&i.push(e.createVector(t.velocity.x,-t.maxSpeed)),i}getForces(e,t,r){return[]}}class j{getGoals(e,t,r){return[]}getForces(e,t,r){const o=[];for(const i of r)if(t!==i)for(let r=0;r<i.body.length;r+=4){const a=i.body[r];o.push(this.repel(e,a.position,t.position))}return o}repel(e,t,r){const o=h.Vector.sub(t,r),i=o.mag();if(i>500)return e.createVector();const a=-100/(i*i);return o.normalize(),o.mult(a),o}}class x{constructor(){Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ticks=0}getGoals(e,t,r){return[]}getForces(e,t,r){this.ticks++;const o=[];return o.push(h.Vector.random2D()),o}}function P(e,t){const r=e.hue(t),o=e.saturation(t),i=e.brightness(t),a=(r+15)%360,n=(r-15)%360,l=e.color(a,o,i),s=e.color(n,o,i);return[t,l,s]}var V=function(e,t,r,o){var i,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(n=(a<3?i(n):a>3?i(t,r,n):i(t,r))||n);return a>3&&n&&Object.defineProperty(t,r,n),n};const k="buddystore";f.storeInstance.hasModule(k)&&f.storeInstance.unregisterModule(k);let B=class extends m.g4{constructor(){super(...arguments),Object.defineProperty(this,"ageLimit",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"colorRange",{enumerable:!0,configurable:!0,writable:!0,value:[0,90]})}setAgeLimit(e){this.ageLimit=Math.max(0,e)}};V([m.mm],B.prototype,"setAgeLimit",null),B=V([(0,m.Yl)({name:k,store:f.storeInstance,dynamic:!0,namespaced:!0})],B);const D=(0,m.rT)(B);function R(e){return e.color(e.random(360),e.random(40,100),e.random(80,100))}function M(){return[new O,new j,new x]}class S{constructor(e,t,r=R(e)){Object.defineProperty(this,"p",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"position",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:r}),this.color.setAlpha(.27)}render(){this.p.push(),this.p.noStroke(),this.p.fill(this.color),this.p.translate(this.position.x,this.position.y),this.p.circle(0,0,this.position.z),this.p.pop()}renderDebug(){const e=w.debugGraphic,t=w.mainSketch;if(!e||!t||!w.debugOn)return;e.push();const r=this.position.x,o=this.position.y,i=t.mouseX-r,a=t.mouseY-o;e.stroke(0,0,100,1),e.strokeWeight(1),e.noFill();const n=t.atan2(a,i)-t.atan2(o,r);e.translate(r,o),e.rotate(n),e.line(0,0,30,30),e.pop()}copy(e,t,r){const o=h.Vector.add(this.position,e);return o.z=t,new S(this.p,o,r)}}class F{constructor(e,t){Object.defineProperty(this,"p",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"age",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"alive",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:h.Vector.random2D()}),Object.defineProperty(this,"acceleration",{enumerable:!0,configurable:!0,writable:!0,value:new h.Vector}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:15}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"colors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"secondaryColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"drives",{enumerable:!0,configurable:!0,writable:!0,value:M()}),Object.defineProperty(this,"stomach",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"stomachCapacity",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"calories",{enumerable:!0,configurable:!0,writable:!0,value:100}),this.colors=P(e,R(e)),this.secondaryColor=R(e),this.secondaryColor.setAlpha(.2),t.z=this.velocity.mag(),this.body=[new S(e,t.copy(),this.colors[0])]}get maxSpeed(){return this.size/4}get position(){return this.body[0].position}draw(e){this.alive&&(this.age++,this.age>D.ageLimit&&(this.alive=!1),this.move(e),this.render(),this.renderDebug())}render(){this.p.noStroke();for(let e=0;e<this.body.length-1;e++){const t=this.body[e];t.render(),e%5===0&&t.renderDebug(),t.position.z*=.99}this.drawForce(this.velocity,this.position)}renderDebug(){const e=w.debugGraphic;e&&w.isDebug&&(e.fill(0,0,100,1),e.textSize(32),e.text(`${this.age}`,this.position.x,this.position.y-20))}move(e){for(const t of this.drives){for(const r of t.getGoals(this.p,this,e))this.steer(r);for(const r of t.getForces(this.p,this,e))this.applyForce(r)}this.changeVelocity()}applyForce(e){e.div(this.size),this.acceleration.add(e)}drawForce(e,t){const r=p().Vector.mult(e,10).add(t);this.p.stroke(this.secondaryColor),this.p.strokeWeight(4),this.p.noFill(),this.p.line(t.x,t.y,r.x,r.y)}changeVelocity(){this.velocity.add(this.acceleration).limit(this.maxSpeed);while(this.body.length>=this.maxLength)this.body.pop();const e=Math.floor(this.age/10)%this.colors.length,t=this.colors[e],r=this.body[0].copy(this.velocity,2*this.size/this.p.max(this.velocity.mag(),1),t);this.body.unshift(r),this.acceleration.mult(0)}steer(e){e.sub(this.velocity),e.limit(3),this.applyForce(e)}}var G=function(e,t,r,o){var i,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(n=(a<3?i(n):a>3?i(t,r,n):i(t,r))||n);return a>3&&n&&Object.defineProperty(t,r,n),n};const W="gamestore";f.storeInstance.hasModule(W)&&f.storeInstance.unregisterModule(W);let C=class extends m.g4{constructor(){super(...arguments),Object.defineProperty(this,"maxBuddies",{enumerable:!0,configurable:!0,writable:!0,value:2}),Object.defineProperty(this,"fogValue",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"MAX_FOG_VALUE",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"MAX_MAX_BUDDIES",{enumerable:!0,configurable:!0,writable:!0,value:50})}setMaxBuddies(e){this.maxBuddies=Math.max(0,Math.min(e,this.MAX_MAX_BUDDIES))}setFogValue(e){this.fogValue=Math.max(0,Math.min(e,this.MAX_FOG_VALUE))}alterFog(e){this.fogValue+=e}isItGettingDarker(){this.alterFog(1)}iThinkItsClearingUp(){this.alterFog(-1)}};G([m.mm],C.prototype,"setMaxBuddies",null),G([m.mm],C.prototype,"setFogValue",null),G([m.mm],C.prototype,"alterFog",null),G([m.aU],C.prototype,"isItGettingDarker",null),G([m.aU],C.prototype,"iThinkItsClearingUp",null),C=G([(0,m.Yl)({name:W,store:f.storeInstance,dynamic:!0,namespaced:!0})],C);const I=(0,m.rT)(C);class _{constructor(){Object.defineProperty(this,"buddies",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get maxBuddies(){return I.maxBuddies}clearSomeOfTheBuddies(){while(this.buddies.length>this.maxBuddies)this.buddies.shift()}makeAllTheBuddies(){const e=Math.floor(2*Math.random());let t=0;while(this.buddies.length<this.maxBuddies&&t<e)++t,this.addNewBuddy()}addNewBuddy(e){const t=w.mainGraphic;if(!t)return void console.error("No graphics in SketchStore",w.mainGraphic);const r=e||t.createVector(t.random(t.width),t.random(t.height));this.buddies.push(new F(t,r))}doTheThing(){this.buddies.forEach((e=>e.draw(this.buddies))),this.buddies=this.buddies.filter((e=>e.alive)),this.clearSomeOfTheBuddies(),this.makeAllTheBuddies()}}const T=e=>{const t=e.createVector();let r,o,i,a;const n=600,l=600;function s(){if(!o)return;const e=I.fogValue;if(10===e)return void o.background(o.color(0,0,0,1));const t=o.color(0,0,0,.05*e);o.background(t)}e.setup=()=>{e.createCanvas(n,l),e.frameRate(144),e.noCursor(),w.initP(e),o=e.createGraphics(n,l),o.colorMode(e.HSB,360,100,100,1),w.initGraphics(o),i=e.createGraphics(n,l),i.colorMode(e.HSB,360,100,100,1),w.initOverlay(i),a=e.createGraphics(n,l),a.colorMode(e.HSB,360,100,100,1),w.initDebugOverlay(a),r=new _},e.draw=()=>{t.x=e.mouseX,t.y=e.mouseY,s(),null===a||void 0===a||a.clear(),null===i||void 0===i||i.clear(),null===r||void 0===r||r.doTheThing(),i&&A(i,t);const o=w.mainGraphic;o&&e.image(o,0,0),i&&e.image(i,0,0),w.debugOn&&a&&e.image(a,0,0)},e.keyPressed=()=>{" "===e.key&&(null===o||void 0===o||o.background(o.color(0,0,0,1)))},e.mousePressed=t=>(t.preventDefault(),e.mouseX>0&&e.mouseX<e.width&&e.mouseY>0&&e.mouseY<e.height&&(null===r||void 0===r||r.addNewBuddy(e.createVector(e.mouseX,e.mouseY))),!1)};function A(e,t){e.stroke(0,0,100,.8),e.strokeWeight(1),e.noFill(),e.circle(t.x,t.y,20),e.circle(t.x,t.y,10)}const U=(0,o.HX)("data-v-81550aa4");(0,o.dD)("data-v-81550aa4");const X={class:"game-controls column justify-evenly"},z={class:"column col justify-evenly wrap"},H={class:"column col justify-evenly"},L={class:"column col justify-evenly"},Y=(0,o.Uk)("Debug");(0,o.Cn)();const E=U(((e,t,r,i,a,n)=>{const l=(0,o.up)("q-slider"),s=(0,o.up)("q-field"),c=(0,o.up)("q-toggle");return(0,o.wg)(),(0,o.j4)("div",X,[(0,o.Wm)("div",z,[(0,o.Wm)(s,{filled:"",hint:`Max Buddies ${e.maxBuddies}`},{control:U((()=>[(0,o.Wm)(l,{modelValue:e.maxBuddies,"onUpdate:modelValue":t[1]||(t[1]=t=>e.maxBuddies=t),class:"col self-center buddies-slider",color:"green",step:1,min:0,max:50,label:"",dark:"",onWheel:e.maxBuddiesScroll},null,8,["modelValue","onWheel"])])),_:1},8,["hint"])]),(0,o.Wm)("div",H,[(0,o.Wm)(s,{filled:"",hint:`Fog ${e.fogValue}`},{control:U((()=>[(0,o.Wm)(l,{modelValue:e.fogValue,"onUpdate:modelValue":t[2]||(t[2]=t=>e.fogValue=t),class:"col self-center buddies-slider",color:"red",step:1,min:0,max:10,label:"",dark:"",onWheel:e.fogValueScroll},null,8,["modelValue","onWheel"])])),_:1},8,["hint"])]),(0,o.Wm)("div",L,[(0,o.Wm)(s,{filled:"",hint:`FrameRate ${e.frameRate}`},{control:U((()=>[(0,o.Wm)(l,{modelValue:e.frameRate,"onUpdate:modelValue":t[3]||(t[3]=t=>e.frameRate=t),class:"col self-center buddies-slider",color:"blue",step:1,min:0,max:144,label:"",dark:"",onWheel:e.frameRateScroll},null,8,["modelValue","onWheel"])])),_:1},8,["hint"])]),(0,o.Wm)(c,{modelValue:e.debug,"onUpdate:modelValue":t[4]||(t[4]=t=>e.debug=t)},{default:U((()=>[Y])),_:1},8,["modelValue"])])}));var N=function(e,t,r,o){var i,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(n=(a<3?i(n):a>3?i(t,r,n):i(t,r))||n);return a>3&&n&&Object.defineProperty(t,r,n),n};let q=class extends u.w3{get fogValue(){return I.fogValue}set fogValue(e){I.setFogValue(e)}get maxBuddies(){return I.maxBuddies}set maxBuddies(e){I.setMaxBuddies(e)}get frameRate(){return w.frameRate}set frameRate(e){w.setFrameRate(e)}get debug(){return w.debugOn}set debug(e){w.setDebug(e)}maxBuddiesScroll(e){this.maxBuddies=this.maxBuddies-Math.sign(e.deltaY)}fogValueScroll(e){this.fogValue=this.fogValue-Math.sign(e.deltaY)}};q=N([(0,u.Ei)({name:"Buddies Controls"})],q);const Q=q;var Z=r(7916),$=r(2064),K=r(2582),J=r(7518),ee=r.n(J);Q.render=E,Q.__scopeId="data-v-81550aa4";const te=Q;ee()(Q,"components",{QField:Z.Z,QSlider:$.Z,QToggle:K.Z});var re=function(e,t,r,o){var i,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(n=(a<3?i(n):a>3?i(t,r,n):i(t,r))||n);return a>3&&n&&Object.defineProperty(t,r,n),n};let oe=class extends u.w3{constructor(){super(...arguments),Object.defineProperty(this,"p5Container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"p5Handle",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}mounted(){this.p5Handle||(this.p5Handle=new(p())(T,this.p5Container))}unmounted(){var e;null===(e=this.p5Handle)||void 0===e||e.noLoop()}doNothing(e){e.shiftKey||e.preventDefault()}};re([(0,d.Rl)()],oe.prototype,"p5Container",void 0),oe=re([(0,u.Ei)({name:"Buddies!",components:{BuddiesControls:te}})],oe);const ie=oe;ie.render=c,ie.__scopeId="data-v-6f65ad50";const ae=ie;var ne=function(e,t,r,o){var i,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(n=(a<3?i(n):a>3?i(t,r,n):i(t,r))||n);return a>3&&n&&Object.defineProperty(t,r,n),n};let le=class extends u.w3{created(){}};le=ne([(0,u.Ei)({components:{BuddiesComponent:ae}})],le);const se=le;var ce=r(4379);se.render=a,se.__scopeId="data-v-dc6878aa";const ue=se;ee()(se,"components",{QPage:ce.Z})}}]);